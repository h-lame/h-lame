<!doctype html>
<!--[if lt IE 7]>    <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en-gb"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title><%= current_page.data[:title] %></title>
    <meta name="description" content="<%= page_meta_description %>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <%= stylesheet_link_tag "talks/normalize" %>
    <%= stylesheet_link_tag "talks/main" %>
  </head>
  <body>
    <header class="wrapper">
      <h1 class="title"><%= page_title %></h1>
    </header>

    <aside id="menu" class="wrapper">
      <nav>
        <div class="revealer">
          <h1 class="reveal-name"><%= toc_name %></h1>
          <ul class="revealee">
            <% unless current_page.data[:exclude_intro_from_toc] %>
              <li><a href="#intro">Introduction</a></li>
            <% end %>
            <% current_page.data.fetch(:extra_toc_items, []).each do |extra_toc_item| %>
              <li><a href="#<%= extra_toc_item.id %>"><%= extra_toc_item.title %></a></li>
            <% end %>
            <% slides.each.with_index do |slide, idx| %>
              <li><a href="#<%= slide.data[:id] %>"><%= idx + 1 %>: <% markdown(inline: true) do %><%= slide.data[:title] %><% end %></a></li>
            <% end %>
            <% if content_for? :footnotes %>
              <li><a href="#footnotes">Footnotes</a></li>
            <% end %>
          </ul>
        </div>
      </nav>
    </aside>

    <main class="wrapper">
      <article class="numberer">
        <section id="intro">
          <%= yield %>
        </section>

        <% current_page.data.fetch(:extra_toc_items, []).each do |extra_toc_item| %>
          <section id="<%= extra_toc_item.id %>">
            <% markdown do %><%= yield_content extra_toc_item.id.to_sym %><% end %>
          </section>
        <% end %>

        <% slides.each do |slide| %>
          <%= partial 'talks/slide', locals: { slide: slide } %>
        <% end %>

        <% if content_for? :footnotes %>
          <footer id="footnotes">
            <h3>Footnotes</h3>
            <% markdown do %><%= yield_content :footnotes %><% end %>
          </footer>
        <% end %>
      </article>
    </main>

    <%= partial 'ga' %>
  </body>
</html>
